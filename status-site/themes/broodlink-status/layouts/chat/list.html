{{ define "main" }}
<h2>Conversations</h2>
<p class="page-desc">Live chats between users and agents across Slack, Teams, and Telegram.</p>

<div class="card-grid" aria-label="Chat metrics">
  <div class="card metric-card">
    <div class="value" id="chat-active-sessions">—</div>
    <div class="label" data-tooltip="Currently active chat sessions">Active Sessions</div>
  </div>
  <div class="card metric-card">
    <div class="value" id="chat-messages-today">—</div>
    <div class="label" data-tooltip="Messages received and sent today">Messages Today</div>
  </div>
  <div class="card metric-card">
    <div class="value" id="chat-pending-replies">—</div>
    <div class="label" data-tooltip="Replies waiting to be delivered">Pending Replies</div>
  </div>
  <div class="card metric-card">
    <div class="value" id="chat-platforms">—</div>
    <div class="label" data-tooltip="Connected chat platforms">Platforms</div>
  </div>
</div>

<div class="filter-bar">
  <label for="chat-platform-filter">Platform:</label>
  <select id="chat-platform-filter">
    <option value="">All</option>
    <option value="slack">Slack</option>
    <option value="teams">Teams</option>
    <option value="telegram">Telegram</option>
  </select>
  <label for="chat-status-filter">Status:</label>
  <select id="chat-status-filter">
    <option value="active">Active</option>
    <option value="closed">Closed</option>
  </select>
</div>

<div class="card-grid" id="chat-sessions" aria-live="polite">
  <!-- Populated by JS -->
</div>

<div id="chat-message-modal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-label="Message history">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="chat-modal-title">Messages</h3>
      <button class="btn-close" id="chat-modal-close" aria-label="Close">&times;</button>
    </div>
    <div id="chat-message-list" class="chat-messages">
      <!-- Populated by JS -->
    </div>
  </div>
</div>
{{ end }}

{{ define "scripts" }}
<script src="/js/chat.js"></script>
{{ end }}
