{{ define "main" }}
<h2>Connections</h2>
<p class="page-desc">A map of how people, services, and concepts relate to each other â€” built from agent knowledge.</p>

<section aria-labelledby="kg-stats-heading">
  <h3 id="kg-stats-heading">Statistics</h3>
  <div class="card-grid" id="kg-stats" aria-live="polite">
    <div class="card metric-card"><div class="value" id="kg-total-entities">&mdash;</div><div class="label">Entities</div></div>
    <div class="card metric-card"><div class="value" id="kg-active-edges">&mdash;</div><div class="label">Active Edges</div></div>
    <div class="card metric-card"><div class="value" id="kg-historical-edges">&mdash;</div><div class="label">Historical Edges</div></div>
  </div>
</section>

<section aria-labelledby="kg-types-heading">
  <h3 id="kg-types-heading">Entity Types</h3>
  <div id="kg-types-chart" role="img" aria-label="Entity type distribution chart"></div>
</section>

<section aria-labelledby="kg-relations-heading">
  <h3 id="kg-relations-heading">Top Relationship Types</h3>
  <div id="kg-relations-chart" role="img" aria-label="Relationship type distribution chart"></div>
</section>

<section aria-labelledby="kg-connected-heading">
  <h3 id="kg-connected-heading">Most Connected Entities</h3>
  <div class="table-container">
    <table>
      <caption>Entities with the most active relationships</caption>
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Type</th>
          <th scope="col">Edges</th>
        </tr>
      </thead>
      <tbody id="kg-connected-tbody" aria-live="polite">
        <!-- Populated by JS -->
      </tbody>
    </table>
  </div>
</section>

<section aria-labelledby="kg-edges-heading">
  <h3 id="kg-edges-heading">Recent Edges</h3>
  <div class="table-container">
    <table>
      <caption>Most recently created relationships</caption>
      <thead>
        <tr>
          <th scope="col">Source</th>
          <th scope="col">Relation</th>
          <th scope="col">Target</th>
          <th scope="col">Weight</th>
          <th scope="col">Created</th>
        </tr>
      </thead>
      <tbody id="kg-edges-tbody" aria-live="polite">
        <!-- Populated by JS -->
      </tbody>
    </table>
  </div>
</section>
{{ end }}

{{ define "scripts" }}
<script src="/js/charts.js"></script>
<script src="/js/knowledge-graph.js"></script>
{{ end }}
