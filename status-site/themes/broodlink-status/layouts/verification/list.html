{{ define "main" }}
<h2>Quality</h2>
<p class="page-desc">How accurate are your agents? Confidence scores, corrections, and trends over time.</p>

<div class="filter-bar">
  <label for="verify-days">Period:</label>
  <select id="verify-days">
    <option value="7">Last 7 days</option>
    <option value="14">Last 14 days</option>
    <option value="30" selected>Last 30 days</option>
    <option value="90">Last 90 days</option>
  </select>
</div>

<div class="card-grid" id="verify-metrics">
  <div class="card metric-card">
    <div class="value" id="verify-total">--</div>
    <div class="label">Total</div>
  </div>
  <div class="card metric-card" id="mc-verified">
    <div class="value" id="verify-verified">--</div>
    <div class="label">Verified</div>
  </div>
  <div class="card metric-card" id="mc-corrected">
    <div class="value" id="verify-corrected">--</div>
    <div class="label">Corrected</div>
  </div>
  <div class="card metric-card" id="mc-timeout">
    <div class="value" id="verify-timeout">--</div>
    <div class="label">Timeouts</div>
  </div>
  <div class="card metric-card" id="mc-rate">
    <div class="value" id="verify-rate">--</div>
    <div class="label">Accuracy Rate</div>
  </div>
</div>

<div class="verify-charts">
  <div class="card verify-chart-card">
    <h3>Daily Verification Outcomes</h3>
    <div class="verify-chart-wrap">
      <canvas id="verify-daily-chart"></canvas>
    </div>
    <div class="verify-empty-state" id="daily-empty" style="display:none;">
      <p>No verification events recorded in this period.</p>
    </div>
  </div>
  <div class="card verify-chart-card">
    <h3>Confidence Score Distribution</h3>
    <div class="verify-chart-wrap">
      <canvas id="verify-confidence-chart"></canvas>
    </div>
    <div class="verify-empty-state" id="conf-empty" style="display:none;">
      <p>No confidence data available yet.</p>
    </div>
  </div>
</div>

<h3 style="margin-top:2rem;">Daily Breakdown</h3>
<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Total</th>
        <th>Verified</th>
        <th>Corrected</th>
        <th>Timeout</th>
        <th>Error</th>
        <th>Accuracy</th>
      </tr>
    </thead>
    <tbody id="verify-table-body">
      <!-- Populated by JS -->
    </tbody>
  </table>
</div>
{{ end }}

{{ define "scripts" }}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
<script src="/js/verification.js"></script>
{{ end }}
